<!DOCTYPE html>
<html lang="en">

<h  ead>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <title>Document</title>
</head>

<body>
    <!-- <div class ="container"> -->
        <div class ="row">
            <div class = "col-md-3">
                <a href="home.html">(Home)</a>
            </div>
            <div class ="col-md-9">
                    <h2 class = "heading"> Survey Questions</h2>
            </div>
        </div>
    <!-- </div> -->
    <br/>

    <strong>About You</strong>
    <form>
        <div class="form-group">
            <label for="formGroupExampleInput">Name</label>
            <input type="text" class="form-control" id="name-enter" placeholder="Enter your name here">
        </div>
        <div class="form-group">
            <label for="formGroupExampleInput2">Link to Photo Image (Required)</label>
            <input type="text" class="form-control" id="photo-link" placeholder="Another input">
        </div>
    </form>

    <form>
        <h5>Question 1</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You'd rather wear flip flops/sandals over sneakers.</label>
            <select class="form-control" id="q1">
                <span>Select an option</span>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 2</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You enjoy the day time rather than the night time.</label>
            <select class="form-control" id="q2">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 3</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You can easily decide what to wear when it's time to go out somewhere.</label>
            <select class="form-control" id="q3">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 4</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You like cheesburgers better than spinach wraps.</label>
            <select class="form-control" id="q4">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 5</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You would rather walk to a short destination rather than drive a car.</label>
            <select class="form-control" id="q5">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 6</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You attempt to clean your space before leaving to go somehwhere.</label>
            <select class="form-control" id="q6">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 7</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You'd prefer to plan things out rather than go with the current flow.</label>
            <select class="form-control" id="q7">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 8</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You enjoy spending more time outside rather than inside</label>
            <select class="form-control" id="q8">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 9</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You'd prefer to read a book rather than listen to music.</label>
            <select class="form-control" id="q9">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form>

    <form>
        <h5>Question 10</h5>
        <div class="form-group">
            <label for="exampleFormControlSelect1">You enjoy aestetic endeavors over statistical activities.</label>
            <select class="form-control" id="q10" placeholder= "Select an option">
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (Strongly Agree)</option>
            </select>
        </div>

    </form> <br />
    <div class="row">
        <div class="col-md-12">
            <button type="button" class="btn btn-primary" id="submit">Submit</button>
        </div>
    </div>

    <footer class="footer">
            <div class="container">
              <p><a href="http://localhost:8070/api">API Friends List</a> | <a href="https://github.com/WyntonD/Friend-Finder">GitHub Repo</a>
            </div>
    </footer>

    <div id="bestFriendModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">Your New Best Friend</h1>
                </div>
                <div class="modal-body">
                    <h2 id="bestFriend"></h2>
                    <img id="bestFriendPhoto" src="#">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>

<script type="text/javascript">
$("#submit").on("click", function(event) {
    event.preventDefault();
    // Form validation
    var valid = true;
    if($("#name-enter").val() === "" || $("#photo").val() === "") {
        valid = false;
    } else if($("#1").val() === "empty" || $("#q2").val() === "empty" || $("#q3").val() === "empty" || $("#q4").val() === "empty" || $("#q5").val() === "empty" || $("#q6").val() === "empty" || $("#q7").val() === "empty" || $("#q8").val() === "empty" || $("#q9").val() === "empty" || $("#q10").val() === "empty") {
        valid = false;
    }
    if(valid === true) {
        var newUser = {
            name: $("#name-enter").val().trim(),
            photo: $("#photo-link").val().trim(),
            scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val()
            ]
        };
        var currentURL = window.location.origin;
        // Ajax call for receiving response after POST req
        $.post(currentURL + "/api/friends", newUser, function(data) {
            $("#bestFriend").text(data.name);
            $("#bestFriendPhoto").attr("src", data.photo);
            $("#bestFriendModal").modal("toggle");
        });
    } else {
        // If a required field is missing, show alert
        alert("Survey is incomplete!");
    }
});
</script>
</body>

</html>